{"version":3,"sources":["components/Filter.js","modules/PersonsModule.js","components/PersonsForm.js","components/Persons.js","components/Notification.js","App.js","index.js"],"names":["Filter","filter","setFilter","persons","setFiltered","filterPersons","v","newFiltered","map","p","name","toLowerCase","includes","push","value","onChange","e","preventDefault","target","placeholder","baseURL","axios","get","then","r","data","catch","console","log","newPerson","post","id","updatedPerson","put","delete","PersonsForm","setPersons","setNewPerson","setNotification","getId","onSubmit","window","confirm","PersonsModule","alert","newPersons","concat","type","show","number","Persons","filtered","isFilter","deletePersonOnClick","key","style","display","marginRight","onClick","Notification","notification","color","border","width","textAlign","setTimeout","App","useState","setIsFilter","useEffect","length","showNotification","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9a023de8.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Filter = ({ filter, setFilter, persons, setFiltered }) => {\n  const changeHandler = e => {\n    e.preventDefault();\n    setFilter(e.target.value);\n    filterPersons(e.target.value);\n  };\n\n  const filterPersons = v => {\n    const newFiltered = [];\n    persons.map(p => {\n      if (p.name.toLowerCase().includes(v)) {\n        newFiltered.push(p);\n      }\n    });\n    setFiltered(newFiltered);\n  };\n  return (\n    <div>\n      <input\n        value={filter}\n        onChange={changeHandler}\n        placeholder=\"filter..\"\n      ></input>\n    </div>\n  );\n};\n\nexport default Filter;\n","import axios from \"axios\";\n\nconst baseURL = \"/api/persons\";\n\nconst getAll = () => {\n  return axios\n    .get(baseURL)\n    .then(r => r.data)\n    .catch(e => console.log(\"error handling get req: \", e));\n};\n\nconst create = newPerson => {\n  return axios\n    .post(baseURL, newPerson)\n    .then(r => r.data)\n    .catch(e => console.log(\"error handling create req: \", e));\n};\n\nconst update = (id, updatedPerson) => {\n  return axios.put(`${baseURL}/${id}`, updatedPerson).then(r => r.data);\n};\n\nconst deletePerson = id => {\n  return axios.delete(`${baseURL}/${id}`);\n};\n\nexport default {\n  getAll,\n  create,\n  update,\n  deletePerson\n};\n","import React from \"react\";\nimport PersonsModule from \"../modules/PersonsModule\";\n\nconst PersonsForm = ({\n  persons,\n  setPersons,\n  newPerson,\n  setNewPerson,\n  setNotification\n}) => {\n  const getId = () => {\n    const p = persons.filter(p => p.name === newPerson.name);\n    return p[0].id;\n  };\n\n  const pHandler = e => {\n    e.preventDefault();\n    let names = [];\n    names = persons.map(p => p.name);\n    if (names.includes(newPerson.name)) {\n      if (\n        window.confirm(\n          `The phonebook already has someone named \"${newPerson.name}\" do you want to update the number?`\n        )\n      ) {\n        PersonsModule.update(getId(), newPerson)\n          .then(r => {\n            setPersons(persons.map(p => (p.id !== getId() ? p : r)));\n          })\n          .catch(e => {\n            console.log(e);\n            alert(\n              `The person with name ${newPerson.name} has already been deleted`\n            );\n            setPersons(persons.filter(p => p.id !== getId()));\n          });\n      }\n    } else {\n      PersonsModule.create(newPerson);\n\n      const newPersons = persons.concat(newPerson);\n      setPersons(newPersons);\n      setNotification({ type: \"add\", show: true, name: newPerson.name });\n      setNewPerson({ name: \"\", number: \"\" });\n    }\n  };\n\n  const onPChangeName = e => {\n    e.preventDefault();\n    setNewPerson({ ...newPerson, name: e.target.value });\n  };\n  const onPChangeNumber = e => {\n    e.preventDefault();\n    setNewPerson({ ...newPerson, number: e.target.value });\n  };\n  return (\n    <div>\n      <form onSubmit={pHandler}>\n        Name:\n        <input\n          name=\"name\"\n          onChange={onPChangeName}\n          value={newPerson.name}\n          placeholder=\"name...\"\n        ></input>\n        <br />\n        Number:\n        <input\n          name=\"number\"\n          onChange={onPChangeNumber}\n          value={newPerson.number}\n          placeholder=\"number...\"\n        ></input>\n        <br />\n        <button type=\"submit\"> Submit </button>\n      </form>\n    </div>\n  );\n};\n\nexport default PersonsForm;\n","import React from \"react\";\nimport PersonsModule from \"../modules/PersonsModule\";\n\nconst Persons = ({\n  persons,\n  setPersons,\n  filtered,\n  setFiltered,\n  isFilter,\n  setNotification\n}) => {\n  const deletePersonOnClick = (id, name) => {\n    if (window.confirm(`Are you sure you want to delete \"${name}\"?`)) {\n      PersonsModule.deletePerson(id)\n        .then(r => setNotification({ type: \"delete\", show: true, name }))\n        .catch(e => setNotification({ type: \"already\", show: true, name }));\n      setPersons(persons.filter(p => p.id !== id));\n      if (isFilter) {\n        setFiltered(filtered.filter(p => p.id !== id));\n      }\n    }\n  };\n  if (isFilter) {\n    return (\n      <div>\n        {filtered.map(p => (\n          <div key={p.id}>\n            <p style={{ display: \"inline-block\", marginRight: \"5px\" }}>\n              {p.name} {p.number}\n            </p>\n            <button onClick={() => deletePersonOnClick(p.id, p.name)}>\n              Delete\n            </button>\n          </div>\n        ))}\n      </div>\n    );\n  } else {\n    return (\n      <div>\n        {persons.map(p => (\n          <div key={p.id}>\n            <p style={{ display: \"inline-block\", marginRight: \"5px\" }}>\n              {p.name} {p.number}\n            </p>\n            <button onClick={() => deletePersonOnClick(p.id, p.name)}>\n              Delete\n            </button>\n          </div>\n        ))}\n      </div>\n    );\n  }\n};\n\nexport default Persons;\n","import React from \"react\";\n\nconst Notification = ({ notification, setNotification }) => {\n  const style = [\n    {\n      color: \"red\",\n      border: \"3px solid red\",\n      width: \"500px\",\n      textAlign: \"center\"\n    },\n    {\n      color: \"green\",\n      border: \"3px solid green\",\n      width: \"500px\",\n      textAlign: \"center\"\n    }\n  ];\n\n  setTimeout(() => setNotification({ type: \"\", show: false, name: \"\" }), 5000);\n\n  if (notification.type === \"delete\") {\n    return (\n      <div style={style[0]}>\n        <p>Deleted \"{notification.name}\" from the phonebook</p>\n      </div>\n    );\n  } else if (notification.type === \"add\") {\n    return (\n      <div style={style[1]}>\n        <p>Added \"{notification.name}\" to the phonebook</p>\n      </div>\n    );\n  } else if (notification.type === \"already\") {\n    return (\n      <div style={style[0]}>\n        <p>\"{notification.name}\" was already deleted from the phonebook</p>\n      </div>\n    );\n  } else {\n    return null;\n  }\n};\n\nexport default Notification;\n","import React, { useState, useEffect } from \"react\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonsForm\";\nimport Persons from \"./components/Persons\";\nimport PersonsModule from \"./modules/PersonsModule\";\nimport Notification from \"./components/Notification\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newPerson, setNewPerson] = useState({ name: \"\", number: \"\" });\n  const [filter, setFilter] = useState(\"\");\n  const [filtered, setFiltered] = useState([]);\n  const [isFilter, setIsFilter] = useState(false);\n  const [notification, setNotification] = useState({\n    type: \"\",\n    show: false,\n    name: \"\"\n  });\n\n  useEffect(() => {\n    PersonsModule.getAll().then(r => setPersons(r));\n  }, [setPersons]);\n\n  useEffect(() => {\n    if (filter.length > 0) {\n      setIsFilter(true);\n    }\n  }, [filter.length]);\n\n  const showNotification = () => {\n    if (notification.show) {\n      return (\n        <Notification\n          notification={notification}\n          setNotification={setNotification}\n        />\n      );\n    }\n  };\n\n  return (\n    <div>\n      {showNotification()}\n      <h2>Phonebook</h2>\n\n      <Filter\n        filter={filter}\n        setFilter={setFilter}\n        persons={persons}\n        setFiltered={setFiltered}\n      />\n\n      <h3>Add a new</h3>\n\n      <PersonForm\n        persons={persons}\n        setPersons={setPersons}\n        newPerson={newPerson}\n        setNewPerson={setNewPerson}\n        setNotification={setNotification}\n      />\n\n      <h3>Numbers</h3>\n      <Persons\n        persons={persons}\n        setPersons={setPersons}\n        filtered={filtered}\n        setFiltered={setFiltered}\n        isFilter={isFilter}\n        setNotification={setNotification}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}