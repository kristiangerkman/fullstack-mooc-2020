(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,t,n){e.exports=n(37)},37:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(14),c=n.n(o),l=n(2),i=function(e){var t=e.filter,n=e.setFilter,a=e.persons,o=e.setFiltered,c=function(e){var t=[];a.map((function(n){n.name.toLowerCase().includes(e)&&t.push(n)})),o(t)};return r.a.createElement("div",null,r.a.createElement("input",{value:t,onChange:function(e){e.preventDefault(),n(e.target.value),c(e.target.value)},placeholder:"filter.."}))},u=n(4),s=n(3),m=n.n(s),d="/api/persons",f=function(){return m.a.get(d).then((function(e){return e.data})).catch((function(e){return console.log("error handling get req: ",e)}))},p=function(e){return m.a.post(d,e).then((function(e){return e.data})).catch((function(e){return console.log("error handling create req: ",e)}))},h=function(e,t){return m.a.put("".concat(d,"/").concat(e),t).then((function(e){return e.data}))},b=function(e){return m.a.delete("".concat(d,"/").concat(e))},E=function(e){var t=e.persons,n=e.setPersons,a=e.newPerson,o=e.setNewPerson,c=e.setNotification,l=function(){return t.filter((function(e){return e.name===a.name}))[0].id};return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault();if(t.map((function(e){return e.name})).includes(a.name))window.confirm('The phonebook already has someone named "'.concat(a.name,'" do you want to update the number?'))&&h(l(),a).then((function(e){n(t.map((function(t){return t.id!==l()?t:e})))})).catch((function(e){console.log(e),alert("The person with name ".concat(a.name," has already been deleted")),n(t.filter((function(e){return e.id!==l()})))}));else{p(a);var r=t.concat(a);n(r),c({type:"add",show:!0,name:a.name}),o({name:"",number:""})}}},"Name:",r.a.createElement("input",{name:"name",onChange:function(e){e.preventDefault(),o(Object(u.a)({},a,{name:e.target.value}))},value:a.name,placeholder:"name..."}),r.a.createElement("br",null),"Number:",r.a.createElement("input",{name:"number",onChange:function(e){e.preventDefault(),o(Object(u.a)({},a,{number:e.target.value}))},value:a.number,placeholder:"number..."}),r.a.createElement("br",null),r.a.createElement("button",{type:"submit"}," Submit ")))},v=function(e){var t=e.persons,n=e.setPersons,a=e.filtered,o=e.setFiltered,c=e.isFilter,l=e.setNotification,i=function(e,r){window.confirm('Are you sure you want to delete "'.concat(r,'"?'))&&(b(e).then((function(e){return l({type:"delete",show:!0,name:r})})).catch((function(e){return l({type:"already",show:!0,name:r})})),n(t.filter((function(t){return t.id!==e}))),c&&o(a.filter((function(t){return t.id!==e}))))};return c?r.a.createElement("div",null,a.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement("p",{style:{display:"inline-block",marginRight:"5px"}},e.name," ",e.number),r.a.createElement("button",{onClick:function(){return i(e.id,e.name)}},"Delete"))}))):r.a.createElement("div",null,t.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement("p",{style:{display:"inline-block",marginRight:"5px"}},e.name," ",e.number),r.a.createElement("button",{onClick:function(){return i(e.id,e.name)}},"Delete"))})))},y=function(e){var t=e.notification,n=e.setNotification,a=[{color:"red",border:"3px solid red",width:"500px",textAlign:"center"},{color:"green",border:"3px solid green",width:"500px",textAlign:"center"}];return setTimeout((function(){return n({type:"",show:!1,name:""})}),5e3),"delete"===t.type?r.a.createElement("div",{style:a[0]},r.a.createElement("p",null,'Deleted "',t.name,'" from the phonebook')):"add"===t.type?r.a.createElement("div",{style:a[1]},r.a.createElement("p",null,'Added "',t.name,'" to the phonebook')):"already"===t.type?r.a.createElement("div",{style:a[0]},r.a.createElement("p",null,'"',t.name,'" was already deleted from the phonebook')):null},g=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)({name:"",number:""}),u=Object(l.a)(c,2),s=u[0],m=u[1],d=Object(a.useState)(""),p=Object(l.a)(d,2),h=p[0],b=p[1],g=Object(a.useState)([]),w=Object(l.a)(g,2),j=w[0],O=w[1],k=Object(a.useState)(!1),N=Object(l.a)(k,2),x=N[0],P=N[1],S=Object(a.useState)({type:"",show:!1,name:""}),F=Object(l.a)(S,2),D=F[0],C=F[1];Object(a.useEffect)((function(){f().then((function(e){return o(e)}))}),[o]),Object(a.useEffect)((function(){h.length>0&&P(!0)}),[h.length]);return r.a.createElement("div",null,function(){if(D.show)return r.a.createElement(y,{notification:D,setNotification:C})}(),r.a.createElement("h2",null,"Phonebook"),r.a.createElement(i,{filter:h,setFilter:b,persons:n,setFiltered:O}),r.a.createElement("h3",null,"Add a new"),r.a.createElement(E,{persons:n,setPersons:o,newPerson:s,setNewPerson:m,setNotification:C}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(v,{persons:n,setPersons:o,filtered:j,setFiltered:O,isFilter:x,setNotification:C}))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(g,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.9a023de8.chunk.js.map